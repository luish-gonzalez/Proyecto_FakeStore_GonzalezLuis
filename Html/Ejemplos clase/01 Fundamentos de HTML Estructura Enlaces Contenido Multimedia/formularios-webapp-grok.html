<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FormMaster: Aprende Formularios HTML5</title>
  <meta name="description" content="Web app educativa interactiva para dominar formularios HTML5 paso a paso.">
  <style>
    :root {
      --primary: #0d6efd;
      --success: #198754;
      --error: #dc3545;
      --warning: #ffc107;
      --light: #f8f9fa;
      --dark: #212529;
      --border: #dee2e6;
      --shadow: 0 4px 12px rgba(0,0,0,0.1);
      --radius: 12px;
      --transition: all 0.3s ease;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font: 16px/1.6 system-ui, -apple-system, sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      color: var(--dark);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    header {
      background: white;
      padding: 1rem 2rem;
      box-shadow: var(--shadow);
      position: sticky;
      top: 0;
      z-index: 100;
    }
    .header-content {
      max-width: 1200px;
      margin: auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 1rem;
    }
    h1 {
      font-size: 1.8rem;
      color: var(--primary);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .progress-container {
      flex: 1;
      min-width: 200px;
    }
    .progress-bar {
      height: 12px;
      background: #e9ecef;
      border-radius: 6px;
      overflow: hidden;
      margin-bottom: 0.5rem;
    }
    .progress-fill {
      height: 100%;
      background: var(--success);
      width: 0%;
      transition: var(--transition);
    }
    .progress-text {
      font-size: 0.9rem;
      text-align: center;
      font-weight: 600;
    }
    .streak {
      font-size: 1.2rem;
      font-weight: bold;
    }
    nav {
      background: white;
      padding: 1rem 0;
      border-bottom: 1px solid var(--border);
      position: sticky;
      top: 70px;
      z-index: 99;
    }
    .nav-list {
      max-width: 1200px;
      margin: auto;
      display: flex;
      gap: 0.5rem;
      overflow-x: auto;
      padding: 0 2rem;
    }
    .nav-item {
      padding: 0.5rem 1rem;
      background: #e9ecef;
      border-radius: 20px;
      font-size: 0.9rem;
      white-space: nowrap;
      opacity: 0.5;
      cursor: not-allowed;
      transition: var(--transition);
    }
    .nav-item.active {
      background: var(--primary);
      color: white;
      opacity: 1;
      cursor: default;
    }
    .nav-item.completed {
      background: var(--success);
      color: white;
      opacity: 1;
    }
    .nav-item.unlocked {
      background: white;
      border: 2px solid var(--primary);
      color: var(--primary);
      opacity: 1;
      cursor: pointer;
    }
    .nav-item.unlocked:hover {
      background: #e3f2fd;
    }
    main {
      flex: 1;
      max-width: 1200px;
      margin: 2rem auto;
      padding: 0 2rem;
      display: grid;
      grid-template-columns: 300px 1fr;
      gap: 2rem;
    }
    @media (max-width: 992px) {
      main { grid-template-columns: 1fr; }
    }
    .sidebar {
      background: white;
      padding: 1.5rem;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      height: fit-content;
      position: sticky;
      top: 140px;
    }
    .sidebar h3 {
      margin-bottom: 1rem;
      color: var(--primary);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .badges {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 1rem;
    }
    .badge {
      background: #e9ecef;
      padding: 0.5rem 0.75rem;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
    }
    .badge.unlocked {
      background: var(--success);
      color: white;
    }
    .content {
      display: none;
    }
    .content.active {
      display: block;
      animation: fadeIn 0.5s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .lesson {
      background: white;
      padding: 2rem;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      margin-bottom: 2rem;
    }
    .lesson h2 {
      font-size: 1.6rem;
      margin-bottom: 1rem;
      color: var(--primary);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .lesson h2 code {
      background: #f0f0f0;
      padding: 0.25rem 0.5rem;
      border-radius: 6px;
      font-family: 'Courier New', monospace;
      font-size: 0.9em;
    }
    .explanation {
      background: #f8f9fa;
      padding: 1rem;
      border-radius: 8px;
      margin-bottom: 1.5rem;
      border-left: 4px solid var(--primary);
    }
    .demo-container {
      background: var(--light);
      padding: 1.5rem;
      border-radius: 8px;
      margin-bottom: 1.5rem;
      border: 1px solid var(--border);
    }
    .demo-container label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
    }
    .demo-container input,
    .demo-container textarea,
    .demo-container select {
      width: 100%;
      padding: 0.75rem;
      border: 1px solid var(--border);
      border-radius: 6px;
      font: inherit;
      margin-bottom: 1rem;
    }
    .demo-container input:focus,
    .demo-container textarea:focus,
    .demo-container select:focus {
      outline: 2px solid var(--primary);
      border-color: var(--primary);
    }
    .syntax {
      background: #f4f4f4;
      padding: 1rem;
      border-radius: 8px;
      overflow-x: auto;
      position: relative;
      margin-bottom: 1.5rem;
    }
    .copy-btn {
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      background: var(--primary);
      color: white;
      border: none;
      padding: 0.35rem 0.75rem;
      border-radius: 6px;
      font-size: 0.8rem;
      cursor: pointer;
    }
    .copy-btn:hover {
      background: #0b5ed7;
    }
    .copy-btn.copied {
      background: var(--success);
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 1.5rem;
      font-size: 0.95rem;
    }
    th, td {
      border: 1px solid var(--border);
      padding: 0.75rem;
      text-align: left;
    }
    th {
      background: #e3f2fd;
      color: var(--primary);
      font-weight: 600;
    }
    .challenge {
      background: #fff8e1;
      padding: 1.5rem;
      border-radius: 8px;
      border: 1108px solid #ffe58f;
      margin-bottom: 1.5rem;
    }
    .challenge h4 {
      margin-bottom: 1rem;
      color: var(--warning);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .editor-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-bottom: 1rem;
    }
    @media (max-width: 768px) {
      .editor-container { grid-template-columns: 1fr; }
    }
    .code-editor {
      font-family: 'Courier New', monospace;
      width: 100%;
      min-height: 150px;
      padding: 1rem;
      border: 1px solid var(--border);
      border-radius: 6px;
      background: #f8f9fa;
      resize: vertical;
    }
    .preview {
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 1rem;
      background: white;
      min-height: 150px;
    }
    .challenge-actions {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }
    .btn {
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 6px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }
    .btn-primary {
      background: var(--primary);
      color: white;
    }
    .btn-primary:hover {
      background: #0b5ed7;
    }
    .btn-success {
      background: var(--success);
      color: white;
    }
    .btn-success:hover {
      background: #157347;
    }
    .btn-secondary {
      background: #6c757d;
      color: white;
    }
    .btn-secondary:hover {
      background: #5a6268;
    }
    .feedback {
      margin-top: 1rem;
      padding: 1rem;
      border-radius: 6px;
      display: none;
    }
    .feedback.success {
      background: #d1e7dd;
      color: #0f5132;
      border: 1px solid #badbcc;
    }
    .feedback.error {
      background: #f8d7da;
      color: #842029;
      border: 1px solid #f5c2c7;
    }
    .hint {
      margin-top: 0.5rem;
      font-size: 0.9rem;
      color: #6c757d;
      font-style: italic;
    }
    .next-lesson {
      text-align: center;
      margin-top: 2rem;
    }
    #certificado {
      text-align: center;
      padding: 3rem 2rem;
    }
    .certificate {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 3rem;
      border-radius: var(--radius);
      margin: 2rem auto;
      max-width: 600px;
      box-shadow: var(--shadow);
    }
    .certificate h2 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
    }
    .certificate p {
      font-size: 1.2rem;
      margin-bottom: 2rem;
    }
    .download-cert {
      background: white;
      color: var(--primary);
      font-weight: bold;
    }
    .download-cert:hover {
      background: #f8f9fa;
    }
    footer {
      background: var(--dark);
      color: white;
      text-align: center;
      padding: 2rem;
      margin-top: 3rem;
    }
    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      background: #f00;
      top: -10px;
      z-index: 1000;
      pointer-events: none;
      animation: fall 3s linear forwards;
    }
    @keyframes fall {
      to { transform: translateY(100vh) rotate(720deg); opacity: 0; }
    }
    .high-contrast {
      --primary: #0000ff;
      --success: #008000;
      --error: #ff0000;
      --light: #ffffff;
      --dark: #000000;
      background: white !important;
      color: black !important;
    }
    .high-contrast * {
      color: black !important;
      background: white !important;
      border-color: black !important;
    }
    .high-contrast .demo-container,
    .high-contrast .lesson,
    .high-contrast .sidebar {
      background: white !important;
      border: 2px solid black !important;
    }
  </style>
</head>
<body>

  <header>
    <div class="header-content">
      <h1>FormMaster</h1>
      <div class="progress-container">
        <div class="progress-bar">
          <div class="progress-fill" id="progress-fill"></div>
        </div>
        <div class="progress-text" id="progress-text">0% completado • 0/13 lecciones</div>
      </div>
      <div class="streak" id="streak">0</div>
    </div>
  </header>

  <nav>
    <div class="nav-list" id="nav-list">
      <!-- Generado por JS -->
    </div>
  </nav>

  <main>
    <aside class="sidebar">
      <h3>Progreso Personal</h3>
      <p><strong>Puntos:</strong> <span id="points">0</span>/130</p>
      <p><strong>Racha:</strong> <span id="sidebar-streak">0</span> </p>
      <div class="badges" id="badges">
        <div class="badge">Principiante</div>
      </div>
      <button class="btn btn-secondary" id="toggle-contrast" style="margin-top: 1rem; width: 100%;">
        Alto Contraste
      </button>
    </aside>

    <div class="content-container">
      <!-- ====== LECCIÓN 1: <input type="text"> ====== -->
      <section class="content active" id="lesson-1">
        <div class="lesson">
          <h2><code>&lt;input type="text"&gt;</code> – Campo de Texto Simple</h2>
          
          <div class="explanation">
            <p>El campo de texto más básico. Permite entrada libre con validación opcional. Ideal para nombres, direcciones, etc.</p>
          </div>

          <div class="demo-container">
            <label for="demo-text-1">Nombre completo</label>
            <input type="text" id="demo-text-1" placeholder="Ej: Ana García López" minlength="3" required>
          </div>

          <div class="syntax">
            <button class="copy-btn" data-target="syntax-1">Copiar</button>
            <pre id="syntax-1"><code>&lt;input type="text" 
       name="nombre" 
       id="nombre"
       placeholder="Tu nombre"
       minlength="3"
       maxlength="50"
       required&gt;</code></pre>
          </div>

          <table>
            <thead>
              <tr>
                <th>Atributo</th>
                <th>Descripción</th>
                <th>Default</th>
                <th>Ejemplo</th>
                <th>Best Practice</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>placeholder</code></td>
                <td>Texto de ejemplo</td>
                <td>—</td>
                <td><code>placeholder="Nombre"</code></td>
                <td>No reemplaza label</td>
              </tr>
              <tr>
                <td><code>minlength</code></td>
                <td>Mínimo caracteres</td>
                <td>—</td>
                <td><code>minlength="3"</code></td>
                <td>Evita envíos vacíos</td>
              </tr>
              <tr>
                <td><code>maxlength</code></td>
                <td>Máximo caracteres</td>
                <td>—</td>
                <td><code>maxlength="100"</code></td>
                <td>Limita carga servidor</td>
              </tr>
              <tr>
                <td><code>pattern</code></td>
                <td>Expresión regular</td>
                <td>—</td>
                <td><code>pattern="[A-Za-z\\s]+"</code></td>
                <td>Solo letras y espacios</td>
              </tr>
              <tr>
                <td><code>autocomplete</code></td>
                <td>Sugerencias</td>
                <td><code>on</code></td>
                <td><code>autocomplete="name"</code></td>
                <td>Mejora conversión</td>
              </tr>
            </tbody>
          </table>

          <div class="challenge">
            <h4>Desafío: Crea un campo de nombre válido</h4>
            <p>Crea un input de texto con: <code>placeholder="Nombre completo"</code>, <code>minlength="5"</code>, <code>required</code> y <code>pattern="[A-Za-z\s]+"</code>.</p>
            
            <div class="editor-container">
              <textarea class="code-editor" id="editor-1" spellcheck="false">&lt;input type="text" placeholder="Nombre completo" minlength="5" required pattern="[A-Za-z\\s]+"></textarea>
              <div class="preview" id="preview-1"></div>
            </div>

            <div class="challenge-actions">
              <button class="btn btn-primary" onclick="validateChallenge(1)">Validar Código</button>
              <button class="btn btn-secondary" onclick="showHint(1)">Pista</button>
            </div>

            <div class="feedback" id="feedback-1"></div>
            <div class="hint" id="hint-1" style="display: none;">
              Asegúrate de usar <code>pattern="[A-Za-z\\s]+"</code> para permitir espacios en nombres completos.
            </div>
          </div>

          <div class="next-lesson">
            <button class="btn btn-success" id="next-1" disabled onclick="nextLesson(2)">Siguiente Lección</button>
          </div>
        </div>
      </section>

      <!-- ====== LECCIÓN 2: <input type="email"> ====== -->
      <section class="content" id="lesson-2">
        <div class="lesson">
          <h2><code>&lt;input type="email"&gt;</code> – Campo de Email</h2>
          
          <div class="explanation">
            <p>Valida automáticamente el formato de email. Incluye teclado optimizado en móviles.</p>
          </div>

          <div class="demo-container">
            <label for="demo-email-2">Correo electrónico</label>
            <input type="email" id="demo-email-2" placeholder="tú@ejemplo.com" required autocomplete="email">
          </div>

          <div class="syntax">
            <button class="copy-btn" data-target="syntax-2">Copiar</button>
            <pre id="syntax-2"><code>&lt;input type="email" 
       name="email" 
       required 
       autocomplete="email"
       multiple&gt;</code></pre>
          </div>

          <table>
            <thead>
              <tr>
                <th>Atributo</th>
                <th>Descripción</th>
                <th>Default</th>
                <th>Ejemplo</th>
                <th>Best Practice</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>multiple</code></td>
                <td>Varios emails</td>
                <td>false</td>
                <td><code>multiple</code></td>
                <td>Separados por coma</td>
              </tr>
              <tr>
                <td><code>autocomplete</code></td>
                <td>Autocompletar</td>
                <td><code>on</code></td>
                <td><code>autocomplete="email"</code></td>
                <td>Reduce errores</td>
              </tr>
            </tbody>
          </table>

          <div class="challenge">
            <h4>Desafío: Campo de email con múltiples direcciones</h4>
            <p>Crea un input que permita varios emails separados por coma.</p>
            
            <div class="editor-container">
              <textarea class="code-editor" id="editor-2" spellcheck="false">&lt;input type="email" placeholder="Emails (separados por coma)" multiple required></textarea>
              <div class="preview" id="preview-2"></div>
            </div>

            <div class="challenge-actions">
              <button class="btn btn-primary" onclick="validateChallenge(2)">Validar Código</button>
            </div>

            <div class="feedback" id="feedback-2"></div>
          </div>

          <div class="next-lesson">
            <button class="btn btn-success" id="next-2" disabled onclick="nextLesson(3)">Siguiente Lección</button>
          </div>
        </div>
      </section>

      <!-- ====== LECCIÓN 3: <input type="password"> ====== -->
      <section class="content" id="lesson-3">
        <div class="lesson">
          <h2><code>&lt;input type="password"&gt;</code> – Contraseña</h2>
          
          <div class="explanation">
            <p>Oculta caracteres. Usa con botón "mostrar contraseña" para accesibilidad.</p>
          </div>

          <div class="demo-container">
            <label for="demo-pass-3">Contraseña</label>
            <div style="position: relative;">
              <input type="password" id="demo-pass-3" minlength="8" required autocomplete="new-password">
              <button type="button" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer;" onclick="togglePassword(this)">Mostrar</button>
            </div>
          </div>

          <div class="syntax">
            <button class="copy-btn" data-target="syntax-3">Copiar</button>
            <pre id="syntax-3"><code>&lt;input type="password" 
       minlength="8" 
       autocomplete="new-password" required&gt;</code></pre>
          </div>

          <table>
            <thead>
              <tr>
                <th>Atributo</th>
                <th>Descripción</th>
                <th>Default</th>
                <th>Ejemplo</th>
                <th>Best Practice</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>autocomplete</code></td>
                <td>Gestor de contraseñas</td>
                <td><code>on</code></td>
                <td><code>autocomplete="current-password"</code></td>
                <td>Mejora seguridad</td>
              </tr>
            </tbody>
          </table>

          <div class="challenge">
            <h4>Desafío: Contraseña con botón mostrar/ocultar</h4>
            <p>Crea el input y el botón que cambie el tipo.</p>
            
            <div class="editor-container">
              <textarea class="code-editor" id="editor-3" spellcheck="false">&lt;div style="position: relative;">
  &lt;input type="password" minlength="8" required>
  &lt;button type="button" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer;" onclick="this.previousElementSibling.type = this.previousElementSibling.type === 'password' ? 'text' : 'password'; this.textContent = this.textContent === 'Mostrar' ? 'Ocultar' : 'Mostrar';">Mostrar&lt;/button>
&lt;/div></textarea>
              <div class="preview" id="preview-3"></div>
            </div>

            <div class="challenge-actions">
              <button class="btn btn-primary" onclick="validateChallenge(3)">Validar Código</button>
            </div>

            <div class="feedback" id="feedback-3"></div>
          </div>

          <div class="next-lesson">
            <button class="btn btn-success" id="next-3" disabled onclick="nextLesson(4)">Siguiente Lección</button>
          </div>
        </div>
      </section>

      <!-- ====== LECCIÓN 4: <input type="checkbox"> ====== -->
      <section class="content" id="lesson-4">
        <div class="lesson">
          <h2><code>&lt;input type="checkbox"&gt;</code> – Casilla de Verificación</h2>
          
          <div class="explanation">
            <p>Para selecciones múltiples o aceptación de términos.</p>
          </div>

          <div class="demo-container">
            <label>
              <input type="checkbox" name="terms" required>
              Acepto los <a href="#" style="color: var(--primary);">términos y condiciones</a>
            </label>
          </div>

          <div class="syntax">
            <button class="copy-btn" data-target="syntax-4">Copiar</button>
            <pre id="syntax-4"><code>&lt;input type="checkbox" name="acepto" required&gt;
&lt;label for="acepto"&gt;Acepto...&lt;/label&gt;</code></pre>
          </div>

          <table>
            <thead>
              <tr>
                <th>Atributo</th>
                <th>Descripción</th>
                <th>Default</th>
                <th>Ejemplo</th>
                <th>Best Practice</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>checked</code></td>
                <td>Preseleccionado</td>
                <td>false</td>
                <td><code>checked</code></td>
                <td>Evita en términos legales</td>
              </tr>
            </tbody>
          </table>

          <div class="challenge">
            <h4>Desafío: Checkbox de aceptación con enlace</h4>
            <p>Crea un checkbox que requiera aceptación de términos.</p>
            
            <div class="editor-container">
              <textarea class="code-editor" id="editor-4" spellcheck="false">&lt;label>
  &lt;input type="checkbox" required>
  Acepto los &lt;a href="#" style="color: #0066cc;">términos&lt;/a>
&lt;/label></textarea>
              <div class="preview" id="preview-4"></div>
            </div>

            <div class="challenge-actions">
              <button class="btn btn-primary" onclick="validateChallenge(4)">Validar Código</button>
            </div>

            <div class="feedback" id="feedback-4"></div>
          </div>

          <div class="next-lesson">
            <button class="btn btn-success" id="next-4" disabled onclick="nextLesson(5)">Siguiente Lección</button>
          </div>
        </div>
      </section>

      <!-- ====== LECCIÓN 5: <input type="radio"> ====== -->
      <section class="content" id="lesson-5">
        <div class="lesson">
          <h2><code>&lt;input type="radio"&gt;</code> – Botón de Opción</h2>
          
          <div class="explanation">
            <p>Selección única. Usa el mismo <code>name</code> para agrupar.</p>
          </div>

          <div class="demo-container">
            <p><strong>Plan de suscripción</strong></p>
            <label><input type="radio" name="plan" value="basic"> Básico - $9/mes</label>
            <label><input type="radio" name="plan" value="pro"> Pro - $19/mes</label>
            <label><input type="radio" name="plan" value="enterprise"> Enterprise - $49/mes</label>
          </div>

          <div class="syntax">
            <button class="copy-btn" data-target="syntax-5">Copiar</button>
            <pre id="syntax-5"><code>&lt;input type="radio" name="plan" value="basic"&gt;</code></pre>
          </div>

          <table>
            <thead>
              <tr>
                <th>Atributo</th>
                <th>Descripción</th>
                <th>Default</th>
                <th>Ejemplo</th>
                <th>Best Practice</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>name</code></td>
                <td>Grupo de opciones</td>
                <td>—</td>
                <td><code>name="color"</code></td>
                <td>Mismo nombre = selección única</td>
              </tr>
            </tbody>
          </table>

          <div class="challenge">
            <h4>Desafío: Grupo de radio para plan de suscripción</h4>
            <p>Crea 3 opciones con el mismo <code>name="plan"</code>.</p>
            
            <div class="editor-container">
              <textarea class="code-editor" id="editor-5" spellcheck="false">&lt;label>&lt;input type="radio" name="plan" value="free"> Gratis&lt;/label>
&lt;label>&lt;input type="radio" name="plan" value="premium"> Premium&lt;/label>
&lt;label>&lt;input type="radio" name="plan" value="business"> Business&lt;/label></textarea>
              <div class="preview" id="preview-5"></div>
            </div>

            <div class="challenge-actions">
              <button class="btn btn-primary" onclick="validateChallenge(5)">Validar Código</button>
            </div>

            <div class="feedback" id="feedback-5"></div>
          </div>

          <div class="next-lesson">
            <button class="btn btn-success" id="next-5" disabled onclick="nextLesson(6)">Siguiente Lección</button>
          </div>
        </div>
      </section>

      <!-- ====== LECCIÓN 6: <textarea> ====== -->
      <section class="content" id="lesson-6">
        <div class="lesson">
          <h2><code>&lt;textarea&gt;</code> – Área de Texto</h2>
          
          <div class="explanation">
            <p>Para textos largos. Controla tamaño con <code>rows</code> y <code>maxlength</code>.</p>
          </div>

          <div class="demo-container">
            <label for="demo-textarea-6">Comentarios</label>
            <textarea id="demo-textarea-6" rows="4" maxlength="500" placeholder="Escribe tus comentarios (máx. 500 caracteres)..."></textarea>
          </div>

          <div class="syntax">
            <button class="copy-btn" data-target="syntax-6">Copiar</button>
            <pre id="syntax-6"><code>&lt;textarea name="msg" rows="4" maxlength="300"&gt;&lt;/textarea&gt;</code></pre>
          </div>

          <table>
            <thead>
              <tr>
                <th>Atributo</th>
                <th>Descripción</th>
                <th>Default</th>
                <th>Ejemplo</th>
                <th>Best Practice</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>rows</code></td>
                <td>Líneas visibles</td>
                <td>2</td>
                <td><code>rows="5"</code></td>
                <td>Evita scroll innecesario</td>
              </tr>
              <tr>
                <td><code>maxlength</code></td>
                <td>Límite de caracteres</td>
                <td>—</td>
                <td><code>maxlength="1000"</code></td>
                <td>Protege el backend</td>
              </tr>
            </tbody>
          </table>

          <div class="challenge">
            <h4>Desafío: Área de texto con límite de 200 caracteres</h4>
            <p>Crea un textarea con 3 filas y máximo 200 caracteres.</p>
            
            <div class="editor-container">
              <textarea class="code-editor" id="editor-6" spellcheck="false">&lt;textarea rows="3" maxlength="200" placeholder="Máximo 200 caracteres..."></textarea></textarea>
              <div class="preview" id="preview-6"></div>
            </div>

            <div class="challenge-actions">
              <button class="btn btn-primary" onclick="validateChallenge(6)">Validar Código</button>
            </div>

            <div class="feedback" id="feedback-6"></div>
          </div>

          <div class="next-lesson">
            <button class="btn btn-success" id="next-6" disabled onclick="nextLesson(7)">Siguiente Lección</button>
          </div>
        </div>
      </section>

      <!-- ====== LECCIÓN 7: <select> + <option> ====== -->
      <section class="content" id="lesson-7">
        <div class="lesson">
          <h2><code>&lt;select&gt;</code> + <code>&lt;option&gt;</code> – Menú Desplegable</h2>
          
          <div class="explanation">
            <p>Para listas de opciones. Usa <code>&lt;optgroup&gt;</code> para agrupar.</p>
          </div>

          <div class="demo-container">
            <label for="demo-select-7">País</label>
            <select id="demo-select-7" required>
              <option value="">Selecciona tu país</option>
              <optgroup label="América">
                <option value="mx">México</option>
                <option value="ar">Argentina</option>
                <option value="co">Colombia</option>
              </optgroup>
              <optgroup label="Europa">
                <option value="es">España</option>
                <option value="fr">Francia</option>
              </optgroup>
            </select>
          </div>

          <div class="syntax">
            <button class="copy-btn" data-target="syntax-7">Copiar</button>
            <pre id="syntax-7"><code>&lt;select name="pais" required&gt;
  &lt;option value=""&gt;Selecciona...&lt;/option&gt;
  &lt;option value="es"&gt;España&lt;/option&gt;
&lt;/select&gt;</code></pre>
          </div>

          <table>
            <thead>
              <tr>
                <th>Atributo</th>
                <th>Descripción</th>
                <th>Default</th>
                <th>Ejemplo</th>
                <th>Best Practice</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>multiple</code></td>
                <td>Selección múltiple</td>
                <td>false</td>
                <td><code>multiple</code></td>
                <td>Usa con <code>size</code></td>
              </tr>
            </tbody>
          </table>

          <div class="challenge">
            <h4>Desafío: Menú con optgroup para continentes</h4>
            <p>Crea un select con dos grupos: "Norteamérica" y "Sudamérica".</p>
            
            <div class="editor-container">
              <textarea class="code-editor" id="editor-7" spellcheck="false">&lt;select required>
  &lt;option value="">Selecciona país</option>
  &lt;optgroup label="Norteamérica">
    &lt;option value="us">Estados Unidos</option>
    &lt;option value="ca">Canadá</option>
  &lt;/optgroup>
  &lt;optgroup label="Sudamérica">
    &lt;option value="br">Brasil</option>
    &lt;option value="cl">Chile</option>
  &lt;/optgroup>
&lt;/select></textarea>
              <div class="preview" id="preview-7"></div>
            </div>

            <div class="challenge-actions">
              <button class="btn btn-primary" onclick="validateChallenge(7)">Validar Código</button>
            </div>

            <div class="feedback" id="feedback-7"></div>
          </div>

          <div class="next-lesson">
            <button class="btn btn-success" id="next-7" disabled onclick="nextLesson(8)">Siguiente Lección</button>
          </div>
        </div>
      </section>

      <!-- ====== LECCIÓN 8: <button type="submit"> ====== -->
      <section class="content" id="lesson-8">
        <div class="lesson">
          <h2><code>&lt;button type="submit"&gt;</code> – Botón de Envío</h2>
          
          <div class="explanation">
            <p>Envía el formulario. Usa <code>type="submit"</code> explícitamente.</p>
          </div>

          <div class="demo-container">
            <form novalidate>
              <button type="submit" style="width: 100%; padding: 1rem; font-size: 1.1rem;">Enviar Formulario</button>
            </form>
          </div>

          <div class="syntax">
            <button class="copy-btn" data-target="syntax-8">Copiar</button>
            <pre id="syntax-8"><code>&lt;button type="submit"&gt;Enviar&lt;/button&gt;</code></pre>
          </div>

          <table>
            <thead>
              <tr>
                <th>Atributo</th>
                <th>Descripción</th>
                <th>Default</th>
                <th>Ejemplo</th>
                <th>Best Practice</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>type</code></td>
                <td>Comportamiento</td>
                <td><code>submit</code></td>
                <td><code>type="button"</code></td>
                <td>Evita envíos accidentales</td>
              </tr>
            </tbody>
          </table>

          <div class="challenge">
            <h4>Desafío: Botón de envío con icono</h4>
            <p>Crea un botón con emoji de envío.</p>
            
            <div class="editor-container">
              <textarea class="code-editor" id="editor-8" spellcheck="false">&lt;button type="submit">Enviar</textarea>
              <div class="preview" id="preview-8"></div>
            </div>

            <div class="challenge-actions">
              <button class="btn btn-primary" onclick="validateChallenge(8)">Validar Código</button>
            </div>

            <div class="feedback" id="feedback-8"></div>
          </div>

          <div class="next-lesson">
            <button class="btn btn-success" id="next-8" disabled onclick="nextLesson(9)">Siguiente Lección</button>
          </div>
        </div>
      </section>

      <!-- ====== LECCIÓN 9: <fieldset> + <legend> ====== -->
      <section class="content" id="lesson-9">
        <div class="lesson">
          <h2><code>&lt;fieldset&gt;</code> + <code>&lt;legend&gt;</code> – Grupo de Campos</h2>
          
          <div class="explanation">
            <p>Agrupa campos relacionados. Mejora accesibilidad.</p>
          </div>

          <div class="demo-container">
            <fieldset style="padding: 1.5rem; border-radius: 8px;">
              <legend>Información de Contacto</legend>
              <label for="phone-9">Teléfono</label>
              <input type="tel" id="phone-9" placeholder="+52 55 1234 5678">
            </fieldset>
          </div>

          <div class="syntax">
            <button class="copy-btn" data-target="syntax-9">Copiar</button>
            <pre id="syntax-9"><code>&lt;fieldset&gt;
  &lt;legend&gt;Título del grupo&lt;/legend&gt;
  &lt;!-- campos --&gt;
&lt;/fieldset&gt;</code></pre>
          </div>

          <table>
            <thead>
              <tr>
                <th>Atributo</th>
                <th>Descripción</th>
                <th>Default</th>
                <th>Ejemplo</th>
                <th>Best Practice</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>disabled</code></td>
                <td>Deshabilita todo el grupo</td>
                <td>false</td>
                <td><code>disabled</code></td>
                <td>Útil en wizards</td>
              </tr>
            </tbody>
          </table>

          <div class="challenge">
            <h4>Desafío: Grupo de dirección con fieldset</h4>
            <p>Crea un fieldset con leyenda "Dirección" y un input.</p>
            
            <div class="editor-container">
              <textarea class="code-editor" id="editor-9" spellcheck="false">&lt;fieldset>
  &lt;legend>Dirección&lt;/legend>
  &lt;label>Calle y número&lt;/label>
  &lt;input type="text">
&lt;/fieldset></textarea>
              <div class="preview" id="preview-9"></div>
            </div>

            <div class="challenge-actions">
              <button class="btn btn-primary" onclick="validateChallenge(9)">Validar Código</button>
            </div>

            <div class="feedback" id="feedback-9"></div>
          </div>

          <div class="next-lesson">
            <button class="btn btn-success" id="next-9" disabled onclick="nextLesson(10)">Siguiente Lección</button>
          </div>
        </div>
      </section>

      <!-- ====== LECCIÓN 10: <input type="file"> ====== -->
      <section class="content" id="lesson-10">
        <div class="lesson">
          <h2><code>&lt;input type="file"&gt;</code> – Subida de Archivos</h2>
          
          <div class="explanation">
            <p>Permite subir archivos. Usa <code>accept</code> para filtrar tipos.</p>
          </div>

          <div class="demo-container">
            <label for="file-10">Subir CV (PDF, máx. 5MB)</label>
            <input type="file" id="file-10" accept=".pdf" required>
          </div>

          <div class="syntax">
            <button class="copy-btn" data-target="syntax-10">Copiar</button>
            <pre id="syntax-10"><code>&lt;input type="file" accept=".jpg,.png" multiple&gt;</code></pre>
          </div>

          <table>
            <thead>
              <tr>
                <th>Atributo</th>
                <th>Descripción</th>
                <th>Default</th>
                <th>Ejemplo</th>
                <th>Best Practice</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>accept</code></td>
                <td>Tipos permitidos</td>
                <td>—</td>
                <td><code>accept="image/*"</code></td>
                <td>Mejora UX</td>
              </tr>
              <tr>
                <td><code>multiple</code></td>
                <td>Múltiples archivos</td>
                <td>false</td>
                <td><code>multiple</code></td>
                <td>Valida en backend</td>
              </tr>
            </tbody>
          </table>

          <div class="challenge">
            <h4>Desafío: Subida de imágenes con múltiples archivos</h4>
            <p>Crea un input que acepte solo imágenes y múltiples archivos.</p>
            
            <div class="editor-container">
              <textarea class="code-editor" id="editor-10" spellcheck="false">&lt;input type="file" accept="image/*" multiple></textarea>
              <div class="preview" id="preview-10"></div>
            </div>

            <div class="challenge-actions">
              <button class="btn btn-primary" onclick="validateChallenge(10)">Validar Código</button>
            </div>

            <div class="feedback" id="feedback-10"></div>
          </div>

          <div class="next-lesson">
            <button class="btn btn-success" id="next-10" disabled onclick="nextLesson(11)">Siguiente Lección</button>
          </div>
        </div>
      </section>

      <!-- ====== LECCIÓN 11: <input type="date"> ====== -->
      <section class="content" id="lesson-11">
        <div class="lesson">
          <h2><code>&lt;input type="date"&gt;</code> – Selector de Fecha</h2>
          
          <div class="explanation">
            <p>Calendario nativo. Excelente UX en móviles.</p>
          </div>

          <div class="demo-container">
            <label for="date-11">Fecha de nacimiento</label>
            <input type="date" id="date-11" required>
          </div>

          <div class="syntax">
            <button class="copy-btn" data-target="syntax-11">Copiar</button>
            <pre id="syntax-11"><code>&lt;input type="date" name="nacimiento" required&gt;</code></pre>
          </div>

          <table>
            <thead>
              <tr>
                <th>Atributo</th>
                <th>Descripción</th>
                <th>Default</th>
                <th>Ejemplo</th>
                <th>Best Practice</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>min</code></td>
                <td>Fecha mínima</td>
                <td>—</td>
                <td><code>min="1900-01-01"</code></td>
                <td>Evita fechas futuras</td>
              </tr>
              <tr>
                <td><code>max</code></td>
                <td>Fecha máxima</td>
                <td>—</td>
                <td><code>max="2025-12-31"</code></td>
                <td>Limita rango</td>
              </tr>
            </tbody>
          </table>

          <div class="challenge">
            <h4>Desafío: Fecha de nacimiento con rango 1900-2025</h4>
            <p>Crea un input de fecha con min y max.</p>
            
            <div class="editor-container">
              <textarea class="code-editor" id="editor-11" spellcheck="false">&lt;input type="date" min="1900-01-01" max="2025-12-31" required></textarea>
              <div class="preview" id="preview-11"></div>
            </div>

            <div class="challenge-actions">
              <button class="btn btn-primary" onclick="validateChallenge(11)">Validar Código</button>
            </div>

            <div class="feedback" id="feedback-11"></div>
          </div>

          <div class="next-lesson">
            <button class="btn btn-success" id="next-11" disabled onclick="nextLesson(12)">Siguiente Lección</button>
          </div>
        </div>
      </section>

      <!-- ====== LECCIÓN 12: <input type="color"> ====== -->
      <section class="content" id="lesson-12">
        <div class="lesson">
          <h2><code>&lt;input type="color"&gt;</code> – Selector de Color</h2>
          
          <div class="explanation">
            <p>Paleta de colores nativa. Ideal para personalización.</p>
          </div>

          <div class="demo-container">
            <label for="color-12">Color favorito</label>
            <input type="color" id="color-12" value="#0066cc">
          </div>

          <div class="syntax">
            <button class="copy-btn" data-target="syntax-12">Copiar</button>
            <pre id="syntax-12"><code>&lt;input type="color" name="tema" value="#ff6600"&gt;</code></pre>
          </div>

          <table>
            <thead>
              <tr>
                <th>Atributo</th>
                <th>Descripción</th>
                <th>Default</th>
                <th>Ejemplo</th>
                <th>Best Practice</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>value</code></td>
                <td>Color inicial</td>
                <td><code>#000000</code></td>
                <td><code>value="#0066cc"</code></td>
                <td>Coherencia visual</td>
              </tr>
            </tbody>
          </table>

          <div class="challenge">
            <h4>Desafío: Selector de color con valor inicial</h4>
            <p>Crea un input de color con valor #ff6600.</p>
            
            <div class="editor-container">
              <textarea class="code-editor" id="editor-12" spellcheck="false">&lt;input type="color" value="#ff6600"></textarea>
              <div class="preview" id="preview-12"></div>
            </div>

            <div class="challenge-actions">
              <button class="btn btn-primary" onclick="validateChallenge(12)">Validar Código</button>
            </div>

            <div class="feedback" id="feedback-12"></div>
          </div>

          <div class="next-lesson">
            <button class="btn btn-success" id="next-12" disabled onclick="nextLesson(13)">Siguiente Lección</button>
          </div>
        </div>
      </section>

      <!-- ====== LECCIÓN 13: Formulario Completo ====== -->
      <section class="content" id="lesson-13">
        <div class="lesson">
          <h2>Formulario Completo (Integra Todo)</h2>
          
          <div class="explanation">
            <p>Combina todos los elementos aprendidos en un formulario profesional.</p>
          </div>

          <div class="challenge">
            <h4>Desafío Final: Construye el formulario maestro</h4>
            <p>Crea un formulario con 10+ elementos aprendidos. Usa <code>&lt;fieldset&gt;</code>, validación y accesibilidad.</p>
            
            <div class="editor-container">
              <textarea class="code-editor" id="editor-13" spellcheck="false" style="min-height: 400px;">&lt;form id="master-form" novalidate>
  &lt;fieldset>
    &lt;legend>Información Personal&lt;/legend>
    &lt;label>Nombre completo *&lt;/label>
    &lt;input type="text" required minlength="3" autocomplete="name">
    
    &lt;label>Email *&lt;/label>
    &lt;input type="email" required autocomplete="email">
    
    &lt;label>Contraseña *&lt;/label>
    &lt;input type="password" minlength="8" required autocomplete="new-password">
  &lt;/fieldset>
  
  &lt;fieldset>
    &lt;legend>Preferencias&lt;/legend>
    &lt;label>País *&lt;/label>
    &lt;select required>
      &lt;option value="">Selecciona...&lt;/option>
      &lt;option value="mx">México&lt;/option>
      &lt;option value="es">España&lt;/option>
    &lt;/select>
    
    &lt;label>Fecha de nacimiento&lt;/label>
    &lt;input type="date" autocomplete="bday">
    
    &lt;label>Color favorito&lt;/label>
    &lt;input type="color" value="#0066cc">
  &lt;/fieldset>
  
  &lt;fieldset>
    &lt;legend>Consentimientos&lt;/legend>
    &lt;label>
      &lt;input type="checkbox" required>
      Acepto los términos y condiciones
    &lt;/label>
    
    &lt;label>
      &lt;input type="checkbox">
      Recibir newsletter
    &lt;/label>
  &lt;/fieldset>
  
  &lt;fieldset>
    &lt;legend>Subida de archivos&lt;/legend>
    &lt;label>CV (PDF)&lt;/label>
    &lt;input type="file" accept=".pdf">
  &lt;/fieldset>
  
  &lt;button type="submit">Enviar Solicitud&lt;/button>
&lt;/form></textarea>
              <div class="preview" id="preview-13"></div>
            </div>

            <div class="challenge-actions">
              <button class="btn btn-primary" onclick="validateChallenge(13)">Validar Formulario</button>
            </div>

            <div class="feedback" id="feedback-13"></div>
          </div>

          <div class="next-lesson">
            <button class="btn btn-success" id="next-13" disabled onclick="completeCourse()">Completar Curso</button>
          </div>
        </div>
      </section>

      <!-- ====== CERTIFICADO ====== -->
      <section class="content" id="certificado" style="display: none;">
        <div class="certificate">
          <h2>¡Felicidades!</h2>
          <p>Has completado <strong>FormMaster: Dominio de Formularios HTML5</strong></p>
          <p>Puntuación final: <strong id="final-score">0</strong>/130 puntos</p>
          <p>Racha máxima: <strong id="final-streak">0</strong> </p>
          <button class="btn download-cert" onclick="downloadCertificate()">Descargar Certificado</button>
        </div>
      </section>
    </div>
  </main>

  <footer>
    <p>FormMaster © 2025 • Aprende HTML5 con práctica real • <a href="#" style="color: white;">Volver al inicio</a></p>
  </footer>

  <script>
    // === CONFIGURACIÓN INICIAL ===
    const TOTAL_LESSONS = 13;
    const LESSONS = Array.from({length: TOTAL_LESSONS}, (_, i) => i + 1);
    
    let state = {
      currentLesson: 1,
      completed: [],
      points: 0,
      streak: 0,
      maxStreak: 0,
      hintsUsed: 0,
      errors: 0
    };

    // Cargar progreso
    const saved = localStorage.getItem('formMasterProgress');
    if (saved) {
      state = JSON.parse(saved);
      updateProgress();
      unlockLessons();
    }

    // === UTILIDADES ===
    function saveProgress() {
      localStorage.setItem('formMasterProgress', JSON.stringify(state));
    }

    function updateProgress() {
      const progress = (state.completed.length / TOTAL_LESSONS) * 100;
      document.getElementById('progress-fill').style.width = progress + '%';
      document.getElementById('progress-text').textContent = 
        `${Math.round(progress)}% completado • ${state.completed.length}/${TOTAL_LESSONS} lecciones`;
      document.getElementById('points').textContent = state.points;
      document.getElementById('sidebar-streak').textContent = state.streak;
      document.getElementById('streak').textContent = state.streak;
    }

    function unlockLessons() {
      const navItems = document.querySelectorAll('.nav-item');
      navItems.forEach((item, index) => {
        const lessonNum = index + 1;
        if (state.completed.includes(lessonNum)) {
          item.classList.add('completed');
        } else if (lessonNum === state.currentLesson || 
                   state.completed.includes(lessonNum - 1)) {
          item.classList.add('unlocked');
          item.onclick = () => goToLesson(lessonNum);
        } else {
          item.classList.remove('unlocked', 'active');
        }
        
        if (lessonNum === state.currentLesson) {
          item.classList.add('active');
        }
      });
    }

    function goToLesson(num) {
      if (num < state.currentLesson && !state.completed.includes(num)) return;
      
      document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
      document.getElementById(`lesson-${num}`).classList.add('active');
      state.currentLesson = num;
      unlockLessons();
      window.scrollTo(0, 0);
    }

    function nextLesson(num) {
      if (!state.completed.includes(state.currentLesson)) {
        completeLesson();
      }
      goToLesson(num);
    }

    function completeLesson() {
      if (state.completed.includes(state.currentLesson)) return;
      
      state.completed.push(state.currentLesson);
      state.points += 10;
      state.streak++;
      state.maxStreak = Math.max(state.streak, state.maxStreak);
      
      // Bonus por cero errores
      if (state.errors === 0) {
        state.points += 5;
      }
      
      saveProgress();
      updateProgress();
      checkBadges();
      unlockLessons();
      
      // Confeti
      createConfetti();
    }

    function createConfetti() {
      for (let i = 0; i < 50; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + 'vw';
        confetti.style.background = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff'][Math.floor(Math.random() * 5)];
        confetti.style.animationDelay = Math.random() * 3 + 's';
        document.body.appendChild(confetti);
        setTimeout(() => confetti.remove(), 3000);
      }
    }

    function checkBadges() {
      const badges = document.getElementById('badges');
      const completed = state.completed.length;
      
      if (completed >= 3 && !badges.querySelector('.badge:nth-child(2)')) {
        const badge = document.createElement('div');
        badge.className = 'badge unlocked';
        badge.textContent = 'Aprendiz';
        badges.appendChild(badge);
      }
      if (completed >= 7) {
        const badge = badges.querySelector('.badge:nth-child(3)') || document.createElement('div');
        badge.className = 'badge unlocked';
        badge.textContent = 'Experto';
        if (!badges.querySelector('.badge:nth-child(3)')) badges.appendChild(badge);
      }
      if (completed >= 13) {
        const badge = badges.querySelector('.badge:nth-child(4)') || document.createElement('div');
        badge.className = 'badge unlocked';
        badge.textContent = 'Maestro HTML';
        if (!badges.querySelector('.badge:nth-child(4)')) badges.appendChild(badge);
      }
    }

    // === VALIDACIÓN DE DESAFÍOS ===
    function validateChallenge(lesson) {
      const editor = document.getElementById(`editor-${lesson}`);
      const preview = document.getElementById(`preview-${lesson}`);
      const feedback = document.getElementById(`feedback-${lesson}`);
      const code = editor.value.trim();
      
      // Limpiar
      feedback.style.display = 'none';
      preview.innerHTML = '';
      
      try {
        // Crear contenedor seguro
        const container = document.createElement('div');
        container.innerHTML = code;
        preview.appendChild(container);
        
        // Validaciones específicas por lección
        let valid = false;
        let message = '';
        
        switch(lesson) {
          case 1:
            const input1 = container.querySelector('input');
            valid = input1 && 
                    input1.placeholder === 'Nombre completo' && 
                    input1.minLength === 5 && 
                    input1.required && 
                    input1.pattern === '[A-Za-z\\s]+';
            message = valid ? '¡Perfecto! El campo valida solo letras y espacios.' : 'Revisa placeholder, minlength, required y pattern.';
            break;
          case 2:
            const input2 = container.querySelector('input[type="email"]');
            valid = input2 && input2.multiple && input2.required;
            message = valid ? '¡Excelente! Permite múltiples emails.' : 'Falta el atributo multiple.';
            break;
          case 3:
            valid = container.innerHTML.includes('onclick') && 
                    container.querySelector('input[type="password"]');
            message = valid ? '¡Genial! El botón alterna correctamente.' : 'Asegúrate de tener el onclick completo.';
            break;
          case 4:
            valid = container.querySelector('input[type="checkbox"][required]') && 
                    container.querySelector('a');
            message = valid ? '¡Perfecto! Checkbox obligatorio con enlace.' : 'Falta required o el enlace.';
            break;
          case 5:
            const radios = container.querySelectorAll('input[type="radio"]');
            valid = radios.length === 3 && 
                    new Set(Array.from(radios).map(r => r.name)).size === 1;
            message = valid ? '¡Muy bien! Todas las opciones comparten el mismo name.' : 'Deben tener el mismo name.';
            break;
          case 6:
            const textarea = container.querySelector('textarea');
            valid = textarea && textarea.rows === 3 && textarea.maxLength === 200;
            message = valid ? '¡Correcto! Tamaño y límite configurados.' : 'Revisa rows y maxlength.';
            break;
          case 7:
            valid = container.querySelector('optgroup[label="Norteamérica"]') && 
                    container.querySelector('optgroup[label="Sudamérica"]');
            message = valid ? '¡Excelente! Grupos bien definidos.' : 'Faltan los optgroup.';
            break;
          case 8:
            valid = container.querySelector('button[type="submit"]') && 
                    container.textContent.includes('');
            message = valid ? '¡Perfecto! Botón con icono.' : 'Falta el emoji o type="submit".';
            break;
          case 9:
            valid = container.querySelector('fieldset') && 
                    container.querySelector('legend').textContent.trim() === 'Dirección';
            message = valid ? '¡Muy bien! Grupo correctamente definido.' : 'Revisa fieldset y legend.';
            break;
          case 10:
            const fileInput = container.querySelector('input[type="file"]');
            valid = fileInput && fileInput.accept === 'image/*' && fileInput.multiple;
            message = valid ? '¡Genial! Acepta múltiples imágenes.' : 'Falta accept o multiple.';
            break;
          case 11:
            const dateInput = container.querySelector('input[type="date"]');
            valid = dateInput && dateInput.min === '1900-01-01' && dateInput.max === '2025-12-31';
            message = valid ? '¡Perfecto! Rango de fechas correcto.' : 'Revisa min y max.';
            break;
          case 12:
            const colorInput = container.querySelector('input[type="color"]');
            valid = colorInput && colorInput.value === '#ff6600';
            message = valid ? '¡Excelente! Color inicial correcto.' : 'El value debe ser #ff6600.';
            break;
          case 13:
            const form = container.querySelector('form');
            const fieldsets = container.querySelectorAll('fieldset');
            const inputs = container.querySelectorAll('input, select, textarea');
            valid = form && fieldsets.length >= 3 && inputs.length >= 10;
            message = valid ? '¡FELICIDADES! Formulario maestro completado.' : 'Asegúrate de tener todos los elementos.';
            break;
        }
        
        feedback.className = 'feedback ' + (valid ? 'success' : 'error');
        feedback.innerHTML = valid ? '¡Correcto! +10 puntos' : message;
        feedback.style.display = 'block';
        
        if (valid) {
          document.getElementById(`next-${lesson}`).disabled = false;
          if (!state.completed.includes(lesson)) {
            state.errors = 0;
          }
        } else {
          state.errors++;
          if (state.errors >= 2 && document.getElementById(`hint-${lesson}`)) {
            document.getElementById(`hint-${lesson}`).style.display = 'block';
          }
        }
        
      } catch (e) {
        feedback.className = 'feedback error';
        feedback.textContent = 'Error en el código HTML.';
        feedback.style.display = 'block';
      }
    }

    function showHint(lesson) {
      const hint = document.getElementById(`hint-${lesson}`);
      if (hint) {
        hint.style.display = 'block';
        state.hintsUsed++;
      }
    }

    function completeCourse() {
      completeLesson();
      document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
      document.getElementById('certificado').style.display = 'block';
      document.getElementById('final-score').textContent = state.points;
      document.getElementById('final-streak').textContent = state.streak;
      createConfetti();
    }

    function downloadCertificate() {
      alert('Certificado descargado! (En producción generaría PDF)');
    }

    // === INICIALIZACIÓN ===
    document.addEventListener('DOMContentLoaded', () => {
      // Generar navegación
      const navList = document.getElementById('nav-list');
      LESSONS.forEach(num => {
        const item = document.createElement('div');
        item.className = 'nav-item';
        item.textContent = `Lección ${num}`;
        item.dataset.lesson = num;
        navList.appendChild(item);
      });
      
      // Editor en vivo
      document.querySelectorAll('.code-editor').forEach(editor => {
        editor.addEventListener('input', () => {
          const lesson = editor.id.split('-')[1];
          const preview = document.getElementById(`preview-${lesson}`);
          try {
            preview.innerHTML = '<div style="padding: 1rem;">' + editor.value + '</div>';
          } catch (e) {}
        });
      });
      
      // Copiar código
      document.querySelectorAll('.copy-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const target = document.getElementById(btn.dataset.target);
          const range = document.createRange();
          range.selectNode(target);
          window.getSelection().removeAllRanges();
          window.getSelection().addRange(range);
          document.execCommand('copy');
          window.getSelection().removeAllRanges();
          btn.textContent = 'Copiado!';
          btn.classList.add('copied');
          setTimeout(() => {
            btn.textContent = 'Copiar';
            btn.classList.remove('copied');
          }, 2000);
        });
      });
      
      // Alto contraste
      document.getElementById('toggle-contrast').addEventListener('click', () => {
        document.body.classList.toggle('high-contrast');
      });
      
      // Inicializar
      updateProgress();
      unlockLessons();
      goToLesson(state.currentLesson);
    });

    // Toggle password (demo)
    function togglePassword(btn) {
      const input = btn.previousElementSibling;
      const isPassword = input.type === 'password';
      input.type = isPassword ? 'text' : 'password';
      btn.textContent = isPassword ? 'Ocultar' : 'Mostrar';
    }
  </script>
</body>
</html>